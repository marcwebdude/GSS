(function(n){function f(){n.each(t,function(){this.refresh(!0)})}var t=[],r=/^url\(["']?([^"'\)]*)["']?\);?$/i,u=/\.png$/i,i=n.browser.msie&&n.browser.version==6;n(window).resize(f);n.Poshytip=function(t,i){this.$elm=n(t);this.opts=n.extend({},n.fn.poshytip.defaults,i);this.$tip=n(['<div class="',this.opts.className,'">','<div class="tip-inner tip-bg-image"><\/div>','<div class="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left"><\/div>',"<\/div>"].join("")).appendTo(document.body);this.$arrow=this.$tip.find("div.tip-arrow");this.$inner=this.$tip.find("div.tip-inner");this.disabled=!1;this.content=null;this.init()};n.Poshytip.prototype={init:function(){t.push(this);var i=this.$elm.attr("title");if(this.$elm.data("title.poshytip",i!==undefined?i:null).data("poshytip",this),this.opts.showOn!="none"){this.$elm.bind({"mouseenter.poshytip":n.proxy(this.mouseenter,this),"mouseleave.poshytip":n.proxy(this.mouseleave,this)});switch(this.opts.showOn){case"hover":this.opts.alignTo=="cursor"&&this.$elm.bind("mousemove.poshytip",n.proxy(this.mousemove,this));this.opts.allowTipHover&&this.$tip.hover(n.proxy(this.clearTimeouts,this),n.proxy(this.mouseleave,this));break;case"focus":this.$elm.bind({"focus.poshytip":n.proxy(this.show,this),"blur.poshytip":n.proxy(this.hide,this)})}}},mouseenter:function(){if(this.disabled||(this.$elm.attr("title",""),this.opts.showOn=="focus"))return!0;this.clearTimeouts();this.showTimeout=setTimeout(n.proxy(this.show,this),this.opts.showTimeout)},mouseleave:function(t){if(this.disabled||this.asyncAnimating&&(this.$tip[0]===t.relatedTarget||jQuery.contains(this.$tip[0],t.relatedTarget)))return!0;var i=this.$elm.data("title.poshytip");if(i!==null&&this.$elm.attr("title",i),this.opts.showOn=="focus")return!0;this.clearTimeouts();this.hideTimeout=setTimeout(n.proxy(this.hide,this),this.opts.hideTimeout)},mousemove:function(n){if(this.disabled)return!0;this.eventX=n.pageX;this.eventY=n.pageY;this.opts.followCursor&&this.$tip.data("active")&&(this.calcPos(),this.$tip.css({left:this.pos.l,top:this.pos.t}),this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow))},show:function(){this.disabled||this.$tip.data("active")||(this.reset(),this.update(),this.display(),this.opts.timeOnScreen&&setTimeout(n.proxy(this.hide,this),this.opts.timeOnScreen))},hide:function(){!this.disabled&&this.$tip.data("active")&&this.display(!0)},reset:function(){this.$tip.queue([]).detach().css("visibility","hidden").data("active",!1);this.$inner.find("*").poshytip("hide");this.opts.fade&&this.$tip.css("opacity",this.opacity);this.$arrow[0].className="tip-arrow tip-arrow-top tip-arrow-right tip-arrow-bottom tip-arrow-left";this.asyncAnimating=!1},update:function(n,t){var r,u,i;if(!this.disabled){if(r=n!==undefined,r){if(t||(this.opts.content=n),!this.$tip.data("active"))return}else n=this.opts.content;u=this;i=typeof n=="function"?n.call(this.$elm[0],function(n){u.update(n)}):n=="[title]"?this.$elm.data("title.poshytip"):n;this.content!==i&&(this.$inner.empty().append(i),this.content=i);this.refresh(r)}},refresh:function(t){var a,f,e,h,o,v;if(!this.disabled){if(t){if(!this.$tip.data("active"))return;a={left:this.$tip.css("left"),top:this.$tip.css("top")}}if(this.$tip.css({left:0,top:0}).appendTo(document.body),this.opacity===undefined&&(this.opacity=this.$tip.css("opacity")),f=this.$tip.css("background-image").match(r),e=this.$arrow.css("background-image").match(r),f&&(h=u.test(f[1]),i&&h?(this.$tip.css("background-image","none"),this.$inner.css({margin:0,border:0,padding:0}),f=h=!1):this.$tip.prepend('<table border="0" cellpadding="0" cellspacing="0"><tr><td class="tip-top tip-bg-image" colspan="2"><span><\/span><\/td><td class="tip-right tip-bg-image" rowspan="2"><span><\/span><\/td><\/tr><tr><td class="tip-left tip-bg-image" rowspan="2"><span><\/span><\/td><td><\/td><\/tr><tr><td class="tip-bottom tip-bg-image" colspan="2"><span><\/span><\/td><\/tr><\/table>').css({border:0,padding:0,"background-image":"none","background-color":"transparent"}).find(".tip-bg-image").css("background-image",'url("'+f[1]+'")').end().find("td").eq(3).append(this.$inner),h&&!n.support.opacity&&(this.opts.fade=!1)),e&&!n.support.opacity&&(i&&u.test(e[1])&&(e=!1,this.$arrow.css("background-image","none")),this.opts.fade=!1),o=this.$tip.find("table"),i){this.$tip[0].style.width="";o.width("auto").find("td").eq(3).width("auto");var s=this.$tip.width(),c=parseInt(this.$tip.css("min-width")),l=parseInt(this.$tip.css("max-width"));!isNaN(c)&&s<c?s=c:!isNaN(l)&&s>l&&(s=l);this.$tip.add(o).width(s).eq(0).find("td").eq(3).width("100%")}else o[0]&&o.width("auto").find("td").eq(3).width("auto").end().end().width(document.defaultView&&document.defaultView.getComputedStyle&&parseFloat(document.defaultView.getComputedStyle(this.$tip[0],null).width)||this.$tip.width()).find("td").eq(3).width("100%");this.tipOuterW=this.$tip.outerWidth();this.tipOuterH=this.$tip.outerHeight();this.calcPos();e&&this.pos.arrow&&(this.$arrow[0].className="tip-arrow tip-arrow-"+this.pos.arrow,this.$arrow.css("visibility","inherit"));t?(this.asyncAnimating=!0,v=this,this.$tip.css(a).animate({left:this.pos.l,top:this.pos.t},200,function(){v.asyncAnimating=!1})):this.$tip.css({left:this.pos.l,top:this.pos.t})}},display:function(t){var e=this.$tip.data("active"),r,u,i,f,o;(!e||t)&&(e||!t)&&(this.$tip.stop(),(this.opts.slide&&this.pos.arrow||this.opts.fade)&&(t&&this.opts.hideAniDuration||!t&&this.opts.showAniDuration)&&(r={},u={},this.opts.slide&&this.pos.arrow&&(this.pos.arrow=="bottom"||this.pos.arrow=="top"?(i="top",f="bottom"):(i="left",f="right"),o=parseInt(this.$tip.css(i)),r[i]=o+(t?0:this.pos.arrow==f?-this.opts.slideOffset:this.opts.slideOffset),u[i]=o+(t?this.pos.arrow==f?this.opts.slideOffset:-this.opts.slideOffset:0)+"px"),this.opts.fade&&(r.opacity=t?this.$tip.css("opacity"):0,u.opacity=t?0:this.opacity),this.$tip.css(r).animate(u,this.opts[t?"hideAniDuration":"showAniDuration"])),t?this.$tip.queue(n.proxy(this.reset,this)):this.$tip.css("visibility","inherit"),this.$tip.data("active",!e))},disable:function(){this.reset();this.disabled=!0},enable:function(){this.disabled=!1},destroy:function(){this.reset();this.$tip.remove();delete this.$tip;this.content=null;this.$elm.unbind(".poshytip").removeData("title.poshytip").removeData("poshytip");t.splice(n.inArray(this,t),1)},clearTimeouts:function(){this.showTimeout&&(clearTimeout(this.showTimeout),this.showTimeout=0);this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=0)},calcPos:function(){var t={l:0,t:0,arrow:""},e=n(window),i={l:e.scrollLeft(),t:e.scrollTop(),w:e.width(),h:e.height()},f,s,h,u,c,o,l,r;this.opts.alignTo=="cursor"?(f=s=h=this.eventX,u=c=o=this.eventY):(l=this.$elm.offset(),r={l:l.left,t:l.top,w:this.$elm.outerWidth(),h:this.$elm.outerHeight()},f=r.l+(this.opts.alignX!="inner-right"?0:r.w),s=f+Math.floor(r.w/2),h=f+(this.opts.alignX!="inner-left"?r.w:0),u=r.t+(this.opts.alignY!="inner-bottom"?0:r.h),c=u+Math.floor(r.h/2),o=u+(this.opts.alignY!="inner-top"?r.h:0));switch(this.opts.alignX){case"right":case"inner-left":t.l=h+this.opts.offsetX;t.l+this.tipOuterW>i.l+i.w&&(t.l=i.l+i.w-this.tipOuterW);(this.opts.alignX=="right"||this.opts.alignY=="center")&&(t.arrow="left");break;case"center":t.l=s-Math.floor(this.tipOuterW/2);t.l+this.tipOuterW>i.l+i.w?t.l=i.l+i.w-this.tipOuterW:t.l<i.l&&(t.l=i.l);break;default:t.l=f-this.tipOuterW-this.opts.offsetX;t.l<i.l&&(t.l=i.l);(this.opts.alignX=="left"||this.opts.alignY=="center")&&(t.arrow="right")}switch(this.opts.alignY){case"bottom":case"inner-top":t.t=o+this.opts.offsetY;t.arrow&&this.opts.alignTo!="cursor"||(t.arrow="top");t.t+this.tipOuterH>i.t+i.h&&(t.t=u-this.tipOuterH-this.opts.offsetY,t.arrow=="top"&&(t.arrow="bottom"));break;case"center":t.t=c-Math.floor(this.tipOuterH/2);t.t+this.tipOuterH>i.t+i.h?t.t=i.t+i.h-this.tipOuterH:t.t<i.t&&(t.t=i.t);break;default:t.t=u-this.tipOuterH-this.opts.offsetY;t.arrow&&this.opts.alignTo!="cursor"||(t.arrow="bottom");t.t<i.t&&(t.t=o+this.opts.offsetY,t.arrow=="bottom"&&(t.arrow="top"))}this.pos=t}};n.fn.poshytip=function(t){var u,r,i,f;if(typeof t=="string")return u=arguments,r=t,Array.prototype.shift.call(u),r=="destroy"&&this.die("mouseenter.poshytip").die("focus.poshytip"),this.each(function(){var t=n(this).data("poshytip");t&&t[r]&&t[r].apply(t,u)});if(i=n.extend({},n.fn.poshytip.defaults,t),n("#poshytip-css-"+i.className)[0]||n(['<style id="poshytip-css-',i.className,'" type="text/css">',"div.",i.className,"{visibility:hidden;position:absolute;top:0;left:0;}","div.",i.className," table, div.",i.className," td{margin:0;font-family:inherit;font-size:inherit;font-weight:inherit;font-style:inherit;font-variant:inherit;}","div.",i.className," td.tip-bg-image span{display:block;font:1px/1px sans-serif;height:",i.bgImageFrameSize,"px;width:",i.bgImageFrameSize,"px;overflow:hidden;}","div.",i.className," td.tip-right{background-position:100% 0;}","div.",i.className," td.tip-bottom{background-position:100% 100%;}","div.",i.className," td.tip-left{background-position:0 100%;}","div.",i.className," div.tip-inner{background-position:-",i.bgImageFrameSize,"px -",i.bgImageFrameSize,"px;}","div.",i.className," div.tip-arrow{visibility:hidden;position:absolute;overflow:hidden;font:1px/1px sans-serif;}","<\/style>"].join("")).appendTo("head"),i.liveEvents&&i.showOn!="none"){f=n.extend({},i,{liveEvents:!1});switch(i.showOn){case"hover":this.live("mouseenter.poshytip",function(){var t=n(this);t.data("poshytip")||t.poshytip(f).poshytip("mouseenter")});break;case"focus":this.live("focus.poshytip",function(){var t=n(this);t.data("poshytip")||t.poshytip(f).poshytip("show")})}return this}return this.each(function(){new n.Poshytip(this,i)})};n.fn.poshytip.defaults={content:"[title]",className:"tip-yellow",bgImageFrameSize:10,showTimeout:500,hideTimeout:100,timeOnScreen:0,showOn:"hover",liveEvents:!1,alignTo:"cursor",alignX:"right",alignY:"top",offsetX:-22,offsetY:18,allowTipHover:!0,followCursor:!1,fade:!0,slide:!0,slideOffset:8,showAniDuration:300,hideAniDuration:300}})(jQuery);
//# sourceMappingURL=jquery.poshytip.min.js.map
